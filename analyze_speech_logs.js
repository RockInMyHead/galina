#!/usr/bin/env node

/**
 * –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
 * –ü–æ–º–æ–≥–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å Web Speech API
 */

console.log('üîç –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è');
console.log('==========================================\n');

console.log('üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:');
console.log('1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3002/voice');
console.log('2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ');
console.log('3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)');
console.log('4. –í—Å—Ç–∞–≤—å—Ç–µ –ª–æ–≥–∏ –Ω–∏–∂–µ –∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+D\n');

console.log('üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:');
console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ');

const issues = [
  {
    pattern: /Not in secure context|Failed to access assets/,
    problem: 'HTTPS —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ',
    solution: '–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å HTTPS: ./dev_https.sh –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä'
  },
  {
    pattern: /Microphone permission denied|not-allowed/,
    problem: '–î–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∑–∞–ø—Ä–µ—â–µ–Ω',
    solution: '–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞'
  },
  {
    pattern: /network|network error/i,
    problem: '–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é',
    solution: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ'
  },
  {
    pattern: /no-speech/i,
    problem: '–†–µ—á—å –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞',
    solution: '–ì–æ–≤–æ—Ä–∏—Ç–µ –≥—Ä–æ–º—á–µ, –±–ª–∏–∂–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É'
  },
  {
    pattern: /audio-capture/i,
    problem: '–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞—Ö–≤–∞—Ç–æ–º –∞—É–¥–∏–æ',
    solution: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã'
  },
  {
    pattern: /Web Speech API not supported/i,
    problem: 'API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è',
    solution: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome, Edge –∏–ª–∏ Safari'
  }
];

issues.forEach((issue, index) => {
  console.log(`${index + 1}. ${issue.problem}`);
  console.log(`   –†–µ—à–µ–Ω–∏–µ: ${issue.solution}\n`);
});

console.log('üìä –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:');
console.log('- location.protocol –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "https:"');
console.log('- window.isSecureContext –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å true');
console.log('- navigator.mediaDevices –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å');
console.log('- SpeechRecognition API –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω');
console.log('- –ú–∏–∫—Ä–æ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω\n');

console.log('üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:');
console.log('- ./dev_https.sh              # –ó–∞–ø—É—Å–∫ —Å HTTPS');
console.log('- npm run dev -- --port 3002  # –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫');
console.log('- open test_speech_recognition.html  # –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª\n');

console.log('üí° –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–ª–∞–¥–∫–µ:');
console.log('- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Application > Local Storage –≤ DevTools');
console.log('- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞');
console.log('- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ');
console.log('- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏\n');

console.log('üéØ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å:');
console.log('- –ü–æ–ª–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏');
console.log('- –í–µ—Ä—Å–∏–µ–π –±—Ä–∞—É–∑–µ—Ä–∞');
console.log('- –û–°');
console.log('- –ù–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞\n');

