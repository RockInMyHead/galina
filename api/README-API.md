# üöÄ API —Å–µ—Ä–≤–µ—Ä –ì–∞–ª–∏–Ω–æ–π

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

```bash
cd /Users/artembutko/Desktop/Galina/api

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
npm run diagnose

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm run db:push

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm start
```

## üìã –°–∫—Ä–∏–ø—Ç—ã

- `npm start` - –ó–∞–ø—É—Å–∫ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `npm run direct` - –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- `npm run diagnose` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
- `npm run db:push` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
PORT=5001
DATABASE_URL="file:./prisma/galina.db"
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
```

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É"
- –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 1042: `curl https://lawyer.windexs.ru:1042/health`

### 2. –û—à–∏–±–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
rm -rf node_modules package-lock.json
npm install
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
npm run db:push
```

### 4. –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
lsof -i :5001  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç
kill -9 <PID>  # –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
curl https://lawyer.windexs.ru:1042/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","message":"Galina API is running"}
```

## üîó –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- `POST /chat` - –ß–∞—Ç —Å –ò–ò
- `POST /tts` - –¢–µ–∫—Å—Ç –≤ —Ä–µ—á—å
- `POST /stt` - –†–µ—á—å –≤ —Ç–µ–∫—Å—Ç

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–µ—Ä–≤–µ—Ä –ª–æ–≥–∏—Ä—É–µ—Ç:
- ‚úÖ –ó–∞–ø—É—Å–∫ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—à–∏–±–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è


