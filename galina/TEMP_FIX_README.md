# ‚úÖ –ü–†–û–ë–õ–ï–ú–´ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –ò API –†–ï–®–ï–ù–´!

## üéâ –°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 403 Forbidden:
API –∫–ª—é—á OpenAI –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `api/.env` —Ñ–∞–π–ª–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 500 Internal Server Error:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω DATABASE_URL - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
- –°–æ–∑–¥–∞–Ω–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è demo –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã:
- ‚úÖ **API –∫–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** –∏–∑ .env —Ñ–∞–π–ª–∞
- ‚úÖ **API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç** —Å OpenAI API —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- ‚úÖ **–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã** –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

#### OpenAI API –∫–ª—é—á:
```
‚úÖ API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç!
üìù –û—Ç–≤–µ—Ç: Hi
```

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```
‚úÖ dotenv loaded: —É—Å–ø–µ—à–Ω–æ
OPENAI_API_KEY: sk-proj-... ‚úÖ –Ω–∞–π–¥–µ–Ω
PROXY_HOST: 185.68.187.20 ‚úÖ –Ω–∞–π–¥–µ–Ω
DATABASE_URL: ‚úÖ –Ω–∞–π–¥–µ–Ω
```

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!
üìù –û—Ç–≤–µ—Ç: {"user":{"id":"...","email":"unique@example.com","name":"Unique User"},"token":"eyJ..."}
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä –Ω–∞ production
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
sudo systemctl restart galina-api
# –∏–ª–∏
pm2 restart galina-api
# –∏–ª–∏ –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å production API
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ:
node test-api-endpoints.cjs
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ POST https://lawyer.windexs.ru/api/chat
   Status: 200 (expected: 200,403)
   Response: {"choices":[{"message":{"content":"..."}}...}
```

### 3. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ production API
–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã - –≤–µ—Ä–Ω—É—Ç—å production URL:
```bash
# –í .env.production (–µ—Å–ª–∏ –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω):
VITE_API_BASE_URL=https://lawyer.windexs.ru/api
```

## üìä –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- `npm run test:openai` - —Ç–µ—Å—Ç OpenAI API –∫–ª—é—á–∞
- `npm run test:proxy` - —Ç–µ—Å—Ç –ø—Ä–æ–∫—Å–∏
- `node test-api-endpoints.cjs` - —Ç–µ—Å—Ç –≤—Å–µ—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- `node server-env-check.cjs` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üéØ –ò—Ç–æ–≥:

**OPENAI_API_KEY –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–±–ª–µ–º–∞ 403 Forbidden –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ—à–µ–Ω–∞!** üöÄ

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ production API —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!** ‚úÖ
